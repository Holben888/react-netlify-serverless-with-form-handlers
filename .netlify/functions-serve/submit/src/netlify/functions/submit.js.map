{
  "version": 3,
  "sources": ["../../../../../../Users/benholmes/Sandbox/ts-serverless-egghead-jlengstorf/netlify/functions/submit.ts"],
  "sourceRoot": "/var/folders/8h/hpgv708x61l1drd20sbmz2nh0000gn/T/tmp-34099-s9bqkTuWAcfd",
  "sourcesContent": ["import { Handler } from '@netlify/functions'\n\ntype FormFields = 'name' | 'favoriteHexCode'\n\nconst isHexCode = (str: string) => /^#(?:[0-9a-fA-F]{3}){1,2}$/.test(str)\n\nexport type Response = {\n  message: string;\n  name?: string;\n  favoriteHexCode?: string;\n  invalidFields?: Partial<Record<FormFields, string>>;\n}\n\nexport const handler: Handler = async (event) => {\n  const { name, favoriteHexCode } = JSON.parse(event.body ?? '')\n\n  let invalidFields: Response['invalidFields'] = {}\n  if (typeof name !== 'string' || !name.length) {\n    invalidFields.name = 'The name cannot be left blank'\n  }\n  if (typeof favoriteHexCode !== 'string' || !isHexCode(favoriteHexCode)) {\n    invalidFields.favoriteHexCode = 'Should be a valid hexcode. Ex: #CCC or #CCCDDD'\n  }\n\n  if (Object.keys(invalidFields).length) {\n    const response: Response = {\n      invalidFields,\n      message: 'Some of this form data was malformed. Please try again.'\n    }\n    return {\n      statusCode: 400,\n      body: JSON.stringify(response)\n    }\n  }\n\n  const response: Response = {\n    name,\n    favoriteHexCode,\n    message: `My name is ${name} and my favorite color is ${favoriteHexCode}`\n  }\n  return {\n    statusCode: 200,\n    body: JSON.stringify(response)\n  }\n}"],
  "mappings": ";;;;;;;;;AAAA;AAAA;AAAA;AAIA,IAAM,YAAY,CAAC,QAAgB,6BAA6B,KAAK;AAS9D,IAAM,UAAmB,OAAO,UAAU;AAbjD;AAcE,QAAM,EAAE,MAAM,oBAAoB,KAAK,MAAM,YAAM,SAAN,YAAc;AAE3D,MAAI,gBAA2C;AAC/C,MAAI,OAAO,SAAS,YAAY,CAAC,KAAK,QAAQ;AAC5C,kBAAc,OAAO;AAAA;AAEvB,MAAI,OAAO,oBAAoB,YAAY,CAAC,UAAU,kBAAkB;AACtE,kBAAc,kBAAkB;AAAA;AAGlC,MAAI,OAAO,KAAK,eAAe,QAAQ;AACrC,UAAM,YAAqB;AAAA,MACzB;AAAA,MACA,SAAS;AAAA;AAEX,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU;AAAA;AAAA;AAIzB,QAAM,WAAqB;AAAA,IACzB;AAAA,IACA;AAAA,IACA,SAAS,cAAc,iCAAiC;AAAA;AAE1D,SAAO;AAAA,IACL,YAAY;AAAA,IACZ,MAAM,KAAK,UAAU;AAAA;AAAA;",
  "names": []
}
